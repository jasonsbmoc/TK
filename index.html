<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TK Landing</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg: #ffffff;
      --fg: #000000;
      --soft: #7a7a7a;
      --muted: #F7F4ED;
      --typing: #FFEDE5;
      --accent: #FF5B15;
      --radius: 14px;
      --pad: 18px;
      --legal: #bbbbbb;
    }

    * { box-sizing: border-box; }
    html, body {
      height: 100%;
      margin: 0;
      background: var(--bg);
      color: var(--fg);
      font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }

    .glow {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      opacity: 0;
      transition: opacity 0.6s ease;
    }

    .wrap {
      min-height: 100vh;
      display: flex;
      justify-content: center; 
      align-items: center;     
      padding: 40px 16px;
      text-align: center;     
    }

    .content {
      display: flex;
      flex-direction: column;
      align-items: center;  
      justify-content: center;
      gap: 14px;
      max-width: 680px;
      width: auto;
      opacity: 1;
      transform: translateY(0);
      transition: opacity .45s ease, transform .45s ease;
    }

    .content.fade-out {
      opacity: 0;
      transform: translateY(6px);
    }

    #hoverText{
      font-size: clamp(32px, 10vw, 48px);
      font-weight: 600;
      letter-spacing: -0.03em;
      cursor: pointer;
      user-select: none;
      transition: transform 0.2s ease;
    }
    #hoverText:hover { transform: scale(1.01); }

    .caption{
      margin-top: 0px;
      font-size: clamp(14px, 1.8vw, 16px);
      line-height: 130%;
      color: var(--soft);
    }

    .form {
  /* was: margin-top: 12px;  <-- remove this */
  margin: 0;
  width: min(420px, 100%);
  display: grid;
  gap: 10px;
}

    .label {
      text-align: left;
      font-size: 14px;
      color: var(--soft);
      margin: 2px 0 -6px 2px;
    }

    .field {
      position: relative;
      display: flex;
      align-items: center;
      background: var(--muted);
      border-radius: var(--radius);
      padding: 0 var(--pad);
      height: 54px;
      transition: background-color 0.2s ease, box-shadow 0.2s ease;
    }
    .field:focus-within{
      box-shadow: 0 0 0 2px var(--accent) inset;
    }
    .field.typing{
      background: var(--typing);
    }

    .field input{
      flex: 1;
      height: 100%;
      border: none;
      outline: none;
      background: transparent;
      font-size: 16px;
      color: var(--fg);
    }
    .field input::placeholder{
      color: #9b9b9b;
    }

    .submit {
      position: absolute;
      right: 6px;
      top: 6px;
      bottom: 6px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0 14px;
      border-radius: calc(var(--radius) - 6px);
      background: var(--accent);
      color: #fff;
      border: none;
      font-weight: 600;
      cursor: pointer;
      opacity: 0;
      transform: translateX(8px) scale(0.98);
      transition: opacity 160ms ease, transform 200ms cubic-bezier(.22,1,.36,1);
    }
    .submit.show {
      opacity: 1;
      transform: translateX(0) scale(1);
    }
    .submit svg {
      width: 18px;
      height: 18px;
      display: block;
    }

    .legal {
      margin-top: 4px;
      font-size: 12px;
      line-height: 1.4;
      color: var(--legal);
      text-wrap: balance;
    }

    .thankyou {
      position: fixed;      
      inset: 0;
      display: grid;
      place-items: center;
      padding: 24px;
      font-size: 18px;
      color: var(--soft);
      opacity: 0;
      visibility: hidden;       
      transition: opacity .45s ease, visibility 0s linear .45s;
    }
    
    .thankyou.show {
      opacity: 1;
      visibility: visible;
      transition: opacity .45s ease;
    }

    @media (max-width: 420px){
      .field { height: 50px; }
    }

    a {
        color: #000000;
        text-decoration: none;    
    }
  </style>
</head>
<body>
  <div class="glow" id="glow"></div>

  <main class="wrap">
    <section id="content" class="content" aria-live="polite">
      <div id="hoverText">TK</div>
      <div class="caption">A new writing app by <a href="http://medium.com">Medium.</a> <br>Sign up for the waitlist now.</div>

      <form class="form" onsubmit="return false;">
        <div class="field" id="nameField">
          <input id="name" type="text" autocomplete="name" placeholder="Your name (optional)" aria-label="Name (optional)" />
        </div>

        <div class="field" id="emailField">
          <input id="email" type="email" inputmode="email" autocomplete="email"
                 placeholder="Email address" aria-label="Email" />
          <button id="submit" class="submit" aria-label="Submit email">
            <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M6 12h10.5" stroke="white" stroke-width="2" stroke-linecap="round"/>
              <path d="M13.5 7.5L18 12l-4.5 4.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>

        <div class="legal">
          PLACEHOLDER: By submitting your information, you agree to be sent marketing emails by Medium.
          Medium will not use or sell your personal information to any third party.
        </div>
      </form>
    </section>

    <section id="thankyou" class="thankyou" role="status" aria-live="polite">
      Thank you. You're now on the waitlist for TK. Stay tuned for more.
    </section>
  </main>

  <script>
    /* Glitch hover */
    const words = [
      "Thoughtful Keyboard","Text Kaleidoscope","Tactful Knowledge","Talkative Keeper",
      "Technical Knockout","Tying Knots","Thankyou Kindly","Terminal Kiosk",
      "Tasteful Karma","Tangled Know-it-all","Tricky Keyhole","Tinkering Kobold",
      "Turbulent Kite","Tomorrows Key","Timeless Knowing","True Kinship","Tasty Ketchup"
    ];
    const textEl = document.getElementById("hoverText");
    const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
    const original = "TK";
    let lastIndex = -1;

    function randomIndexExcept(length, except){
      if (length <= 1) return 0;
      let idx = Math.floor(Math.random() * length);
      if (idx === except) idx = (idx + 1) % length;
      return idx;
    }
    function glitchEffect(targetText) {
      let iterations = 0;
      const maxIterations = 7;
      const interval = setInterval(() => {
        const displayed = targetText.split("").map((char, i) => {
          if (char === " ") return " ";
          if (i < Math.floor(iterations / 2)) return targetText[i];
          return letters[Math.floor(Math.random() * letters.length)];
        }).join("");
        textEl.textContent = displayed;
        if (iterations >= maxIterations) {
          clearInterval(interval);
          textEl.textContent = targetText;
        }
        iterations++;
      }, 50);
    }
    textEl.addEventListener("mouseenter", () => {
      const idx = randomIndexExcept(words.length, lastIndex);
      lastIndex = idx;
      glitchEffect(words[idx]);
    });
    textEl.addEventListener("mouseleave", () => {
      glitchEffect(original);
    });

    /* Form logic */
    const emailInput = document.getElementById('email');
    const nameInput  = document.getElementById('name');
    const emailField = document.getElementById('emailField');
    const nameField  = document.getElementById('nameField');
    const submitBtn  = document.getElementById('submit');
    const content    = document.getElementById('content');
    const thankyou   = document.getElementById('thankyou');

    function updateTypingState(input, field, withButton=false){
      const hasText = input.value.trim().length > 0;
      field.classList.toggle('typing', hasText);
      if (withButton) submitBtn.classList.toggle('show', hasText);
    }

    emailInput.addEventListener('input', () => updateTypingState(emailInput, emailField, true));
    nameInput.addEventListener('input', () => updateTypingState(nameInput, nameField));

    emailInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && emailInput.value.trim().length > 0) {
        e.preventDefault();
        submitBtn.click();
      }
    });

    submitBtn.addEventListener('click', () => {
      if (!emailInput.value.trim()) return;
      content.classList.add('fade-out');
      const onEnd = () => {
        content.style.display = 'none';
        thankyou.classList.add('show');
        content.removeEventListener('transitionend', onEnd);
      };
      content.addEventListener('transitionend', onEnd);
    });

    /* Cursor glow */
    const glow = document.getElementById('glow');
    const blob = document.createElement('div');
    blob.style.position = 'absolute';
    blob.style.width = '480px';
    blob.style.height = '480px';
    blob.style.borderRadius = '50%';
    blob.style.background = 'radial-gradient(closest-side, rgba(255,91,21,0.24), rgba(255,91,21,0))';
    blob.style.filter = 'blur(24px)';
    blob.style.transform = 'translate(-50%, -50%)';
    glow.appendChild(blob);

    let targetX = window.innerWidth / 2, targetY = window.innerHeight / 2;
    let dotX = targetX, dotY = targetY, fadeTimer;
    window.addEventListener('mousemove', (e) => {
      targetX = e.clientX; targetY = e.clientY;
      glow.style.opacity = '1';
      clearTimeout(fadeTimer);
      fadeTimer = setTimeout(() => glow.style.opacity = '0', 650);
    });
    (function loop(){
      const ease = 0.08;
      dotX += (targetX - dotX) * ease;
      dotY += (targetY - dotY) * ease;
      blob.style.transform = `translate(${dotX}px, ${dotY}px) translate(-50%, -50%)`;
      requestAnimationFrame(loop);
    })();
  </script>
</body>
</html>
